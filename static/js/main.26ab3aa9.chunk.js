(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{10:function(e,t,a){e.exports={container:"ChatRoomComp_container__3JeXS",title:"ChatRoomComp_title__BjmgH",active:"ChatRoomComp_active__2V0Lb",copyBtn:"ChatRoomComp_copyBtn__3j_06",overflowToggle:"ChatRoomComp_overflowToggle__79fQA",toggleModal:"ChatRoomComp_toggleModal__1oegC"}},11:function(e,t,a){e.exports={message:"MessageComp_message__1RUZF",sent:"MessageComp_sent__1IVvY",recieved:"MessageComp_recieved__2TT3b",image:"MessageComp_image__1ZbkY"}},16:function(e,t,a){e.exports={container:"CreateChatRoom_container__23Rsp",btn:"CreateChatRoom_btn__2OAw9",inp:"CreateChatRoom_inp__9rMyD"}},17:function(e,t,a){e.exports={cont:"JoinChatRoom_cont__1KNVa",inp:"JoinChatRoom_inp__2ealv",btn:"JoinChatRoom_btn__2b6fP"}},21:function(e,t,a){e.exports={wallpaper:"SignIn_wallpaper__3bwEG",btn:"SignIn_btn__yTDox"}},22:function(e,t,a){e.exports={inp:"PostMessage_inp__1VVKu",btn:"PostMessage_btn__1GouT"}},34:function(e,t,a){e.exports={main:"ChatRoomist_main__3Cg63"}},36:function(e,t,a){e.exports=a(64)},41:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(20),o=a.n(r),s=(a(41),a(5)),i=a(2),u=a.n(i),m=a(6),l=a(13),p=a.n(l);a(43),a(44);p.a.initializeApp({apiKey:"AIzaSyBbFAX2ZIxMT8BB15mFNgAHP5EuDk6s488",authDomain:"chatapp-b27e7.firebaseapp.com",databaseURL:"https://chatapp-b27e7.firebaseio.com",projectId:"chatapp-b27e7",storageBucket:"chatapp-b27e7.appspot.com",messagingSenderId:"685993746464",appId:"1:685993746464:web:54f8cab6c00f8d1682dc45"});var d=p.a.auth(),f=new p.a.auth.GoogleAuthProvider,h=p.a.firestore(),v=function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.signInWithPopup(f);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){return d.signOut()},b=a(21),_=a.n(b);function C(){return c.a.createElement("div",{className:_.a.wallpaper},c.a.createElement("button",{className:_.a.btn,onClick:v},"Sign in"))}var E=a(31),A=a(32),x=a.n(A),O=a(33),j=a(10),w=a.n(j);function N(e){var t=e.name,a=e.setRoom,r=e.currentRoom,o=e.link,i=Object(n.useState)(!1),u=Object(s.a)(i,2),m=u[0],l=u[1],p=Object(n.useState)(!1),d=Object(s.a)(p,2),f=d[0],v=d[1],g=function(){return v(!1)};Object(n.useEffect)((function(){l(r===o)}),[r]);var b=h.collection("chat-rooms").doc(o).collection("messages").orderBy("sentAt").limitToLast(1),_=Object(O.a)(b,{idField:"sentAt"}),C=Object(s.a)(_,1)[0];return c.a.createElement("div",{onClick:function(){return r!==o?a(o):""},className:"".concat(w.a.container," ").concat(m?w.a.active:"")},c.a.createElement("h1",{className:w.a.title},t||"loading"),c.a.createElement("p",{className:w.a.last},"undefined"==typeof C||C?"Last message lol":"".concat(C[0].name,": ").concat(C[0].content)),m&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:w.a.copyBtn,onClick:function(){return function(e){var t=document.body.appendChild(document.createElement("input"));t.value=e,t.focus(),t.select(),document.execCommand("copy"),t.parentNode.removeChild(t)}(o)}},"Copy RoomID"),c.a.createElement("div",{className:w.a.toggleModal,onClick:function(){return v(!0)}},"Show Members"),c.a.createElement(x.a,{style:{content:{top:"50%",left:"50%",right:"50%",bottom:"25vh",marginRight:"-50%",transform:"translate(-50%, -50%)"}},isOpen:f,onRequestClose:g,contentLabel:"Users:",ariaHideApp:!1},c.a.createElement("div",{className:w.a.overflowToggle},c.a.createElement("h1",null,"Members of this chatroom are:"),c.a.createElement("button",{onClick:g},"Close Modal")))))}var R=a(34),k=a.n(R);function S(e){var t=e.uid,a=e.setRoom,r=e.currentRoom,o=Object(n.useState)([]),i=Object(s.a)(o,2),l=i[0],p=i[1];return Object(n.useEffect)((function(){var e=h.collection("users").doc(t),a=h.collection("chat-rooms");(function(){var n=Object(m.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:h.collection("users").doc(t).onSnapshot(Object(m.a)(u.a.mark((function t(){var n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get();case 2:return t.next=4,t.sent.data();case 4:if(t.t0=typeof t.sent,"undefined"==t.t0){t.next=13;break}return t.next=8,e.get();case 8:return t.next=10,t.sent.data().chatrooms;case 10:n=t.sent,c=[],n.map(function(){var e=Object(m.a)(u.a.mark((function e(t,r){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.doc(t).get();case 2:return e.next=4,e.sent.data();case 4:(o=e.sent)?c.push(o):c=c,r===n.length-1&&p(c);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 13:case"end":return t.stop()}}),t)}))));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[]),c.a.createElement("div",{className:k.a.main},l.map((function(e,t){return c.a.createElement(N,{link:e.id,name:e.name,setRoom:a,currentRoom:r,key:t})})))}var M=a(15),V=a.n(M),y=a(35),U=a(16),T=a.n(U);function J(e){var t=e.uid,a=Object(n.useState)(""),r=Object(s.a)(a,2),o=r[0],i=r[1],l=function(e){var t=document.body.appendChild(document.createElement("input"));t.value=e,t.focus(),t.select(),document.execCommand("copy"),t.parentNode.removeChild(t)},p=function(){var e=Object(m.a)(u.a.mark((function e(){var a,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.collection("chat-rooms"),n=Object(y.a)(),e.next=4,a.doc(n).set({users:[t],createdAt:V.a.firestore.Timestamp.now(),id:n,name:o});case 4:return i(""),l(n),c=h.collection("users").doc(t),e.next=9,c.get();case 9:(r=e.sent.data().chatrooms).push(n),c.set({chatrooms:r},{merge:!0});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:T.a.container},c.a.createElement("input",{placeholder:"Enter chatroom name: ",className:T.a.inp,value:o,onChange:function(e){return i(e.target.value)}}),c.a.createElement("button",{className:T.a.btn,onClick:p},"Create Room"))}var B=a(17),I=a.n(B);function K(e){var t=e.user,a=Object(n.useState)(""),r=Object(s.a)(a,2),o=r[0],i=r[1],l=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.collection("chat-rooms").doc(o),e.next=3,t.get();case 3:return e.abrupt("return",e.sent.exists);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(m.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.collection("users").doc(t.uid),e.next=3,a.get();case 3:return n=e.sent.data().chatrooms,console.log(n.includes(o)),e.abrupt("return",!n.includes(o));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(m.a)(u.a.mark((function e(){var a,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:if(e.t0=e.sent,!e.t0){e.next=7;break}return e.next=6,p();case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=24;break}return a=h.collection("users").doc(t.uid),e.next=11,a.get();case 11:return(n=e.sent.data().chatrooms).push(o),a.set({chatrooms:n},{merge:!0}),e.next=16,h.collection("chat-rooms").doc(o);case 16:return c=e.sent,e.next=19,c.get();case 19:return e.next=21,e.sent.data().users;case 21:(r=e.sent).push(t.uid),c.set({users:r},{merge:!0});case 24:i("");case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:I.a.cont},c.a.createElement("input",{className:I.a.inp,placeholder:"Enter a chatroom",value:o,onChange:function(e){return i(e.target.value)}}),c.a.createElement("button",{className:I.a.btn,onClick:d},"Join"))}var Q=a(11),F=a.n(Q);function X(e){var t=e.user,a=e.name,n=e.content,r=e.photoURL,o=e.uid;return c.a.createElement("div",{className:"".concat(F.a.message," ").concat(t.uid===o?F.a.sent:F.a.recieved)},c.a.createElement("img",{className:F.a.image,src:r,alt:"img"}),c.a.createElement("div",{className:F.a.container},c.a.createElement("h1",{className:F.a.name},a||""),c.a.createElement("p",{className:F.a.msg},n||"")))}var H=a(22),D=a.n(H);function L(e){var t=e.chatRoomId,a=e.user,r=Object(n.useState)(""),o=Object(s.a)(r,2),i=o[0],l=o[1],p=function(){var e=Object(m.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=h.collection("chat-rooms").doc(t),n.collection("messages").add({room:t,content:i,sentAt:V.a.firestore.Timestamp.now(),name:a.displayName,photoURL:a.photoURL,uid:a.uid}),l("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement("input",{className:D.a.inp,value:i,onChange:function(e){return l(e.target.value)}}),c.a.createElement("button",{className:D.a.btn,onClick:p},"Post message"))}var P=a(8),q=a.n(P);function G(e){var t=e.user,a=Object(n.useState)([]),r=Object(s.a)(a,2),o=r[0],i=r[1],l=Object(n.useState)(" "),p=Object(s.a)(l,2),d=p[0],f=p[1],v=function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.collection("chat-rooms").doc(d),a=t.collection("messages").orderBy("sentAt"),e.next=4,a.onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),i(t)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(m.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.collection("users"),n=a.doc(t.uid),e.next=4,n.get();case 4:if(e.t0=typeof e.sent.get("chatrooms"),"undefined"!=e.t0){e.next=7;break}a.doc(t.uid).set({chatrooms:[]});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){v()}),[d]),Object(n.useEffect)((function(){b()}),[]),c.a.createElement("div",{className:q.a.main},c.a.createElement("nav",{className:q.a.nav},c.a.createElement("img",{height:"45",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEXw8PB80rH28vN00K3b6uSU173W6eGZ2b9x0KyO1rrf6+br7+1rz6mq3cim3MaG1LbQDu6uAAAB0ElEQVR4nO3cUVLCQBBFUSQJJgFx/7t1Cz1Vr3HQcxbwhkv5iX25AAAAAH/Ufc25Vx48c++dpcL1saQ8boX3rtueem8/rqXC5SNlKRV+xt772BQqHKVQ4TCFCocpVDhMocJhChUOU6hwmEKFwxQqHKZQ4TCFCocpVDhMocJhCn+rcI89uNcKY1/pUis8jy3lWCuFX7H3tmep8HLNefV7tQcBAAAAAAAA4K+pnXoIXo0oTQXVTj0Er0aUppJqP/MJ/mKoNJWkUGHPVJJChT1TSQoV9kwlKVTYM5WkUGHPVJJChT1TSQoV9kwlKVTYM5WkUGHPVJJChT1TSQoV9kwlvXdh6V/7S6ceglcj9jV3ceDcPgu+X3w14jgqn+ord/lj2XJfaWnpLH6qUmHp1EhtKyf5qRQq7KFQYddWjkKFXVs5ChV2beUoVNi1laNQYddWjkKFXVs5ChV2beUoVNi1laNQYddWjkKFXVs5CocKH4UTB/tR2bqX7kGcL/5Ul/utovIri+iXlftUSXP+wScpVDg/hQrnp1Dh/BQqnJ9ChfNTqHB+ChXOT6HC+SlUOD+FCuenUOH8/kFh8EzAnM6jchDi+caFtYMQ7xwIAAAAs/gBbZtS+iVJBOEAAAAASUVORK5CYII=",alt:"logo",className:q.a.logo}),c.a.createElement("div",{className:q.a.navleft},c.a.createElement(K,{user:t}),c.a.createElement("button",{onClick:g,className:q.a.btn},"Sign Out"))),c.a.createElement("div",{className:q.a.grid},c.a.createElement("div",{className:q.a.chatRooms},c.a.createElement(S,{currentRoom:d,uid:t.uid,setRoom:f}),c.a.createElement(J,{uid:t.uid})),c.a.createElement("div",{className:q.a.chatPannel},c.a.createElement("div",{className:q.a.messages},o.map((function(e,a){return c.a.createElement(X,{user:t,content:e.content,name:e.name,photoURL:e.photoURL,uid:e.uid,key:a})}))),c.a.createElement("div",{className:q.a.addMessages},c.a.createElement(L,{user:t,chatRoomId:d})))))}function W(){var e=Object(E.a)(d),t=Object(s.a)(e,1)[0];return c.a.createElement("div",null,t?c.a.createElement(G,{user:t,chatRoomId:"EK7GYA8nDKA1006FuqyC"}):c.a.createElement(C,null))}o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(W,null)),document.getElementById("root"))},8:function(e,t,a){e.exports={main:"MainScreen_main__3IonU",nav:"MainScreen_nav__2gGRS",btn:"MainScreen_btn__2nQgf",grid:"MainScreen_grid__1wTcP",messages:"MainScreen_messages__2EIfX",addMessages:"MainScreen_addMessages__2FgN5",navleft:"MainScreen_navleft__3O6_D",chatRooms:"MainScreen_chatRooms__2ZfWF",imgSize:"MainScreen_imgSize__1cIgo"}}},[[36,1,2]]]);
//# sourceMappingURL=main.26ab3aa9.chunk.js.map